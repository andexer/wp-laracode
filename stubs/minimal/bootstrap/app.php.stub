<?php

use {{namespace}}\Application;
use {{namespace}}\Providers\AppServiceProvider;
use {{namespace}}\Providers\DatabaseServiceProvider;
use {{namespace}}\Providers\PluginServiceProvider;

/*
|--------------------------------------------------------------------------
| Create The Application
|--------------------------------------------------------------------------
*/

$app = new Application(
    realpath(__DIR__ . '/../')
);

/*
|--------------------------------------------------------------------------
| Register Service Providers
|--------------------------------------------------------------------------
*/

// Core plugin configuration (loads config/*.php files)
$app->register(new \Illuminate\Filesystem\FilesystemServiceProvider($app));
$app->register(new \Illuminate\Log\LogServiceProvider($app));
$app->register(new \Illuminate\Routing\RoutingServiceProvider($app));
$app->register(new PluginServiceProvider($app));

// Application services
$app->register(new AppServiceProvider($app));

// Database and Eloquent
$app->register(new DatabaseServiceProvider($app));

/*
|--------------------------------------------------------------------------
| Bind Important Interfaces
|--------------------------------------------------------------------------
*/

$app->singleton(Illuminate\Contracts\Console\Kernel::class, {{namespace}}\Console\Kernel::class);
$app->singleton(Illuminate\Contracts\Debug\ExceptionHandler::class, {{namespace}}\Exceptions\Handler::class);

/*
|--------------------------------------------------------------------------
| Return The Application
|--------------------------------------------------------------------------
*/

return $app;
