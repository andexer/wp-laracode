<?php

namespace {{namespace}}\WordPress\Providers;

use Illuminate\Support\ServiceProvider;
use {{namespace}}\WordPress\Hooks\ActivationHook;
use {{namespace}}\WordPress\Hooks\DeactivationHook;

/**
 * PluginHookProvider - Centralized WordPress hook registration.
 */
class PluginHookProvider extends ServiceProvider
{
    /**
     * Register plugin hooks.
     *
     * @return void
     */
    public function register(): void
    {
        $this->registerActivationHook();
        $this->registerDeactivationHook();
    }

    /**
     * Boot the service provider.
     *
     * @return void
     */
    public function boot(): void
    {
        // Additional boot logic can be added here
    }

    /**
     * Register the activation hook.
     *
     * @return void
     */
    protected function registerActivationHook(): void
    {
        if (!function_exists('register_activation_hook')) {
            return;
        }

        register_activation_hook({{constantPrefix}}_FILE, function () {
            $hook = $this->app->make(ActivationHook::class);
            $hook->handle();
        });
    }

    /**
     * Register the deactivation hook.
     *
     * @return void
     */
    protected function registerDeactivationHook(): void
    {
        if (!function_exists('register_deactivation_hook')) {
            return;
        }

        register_deactivation_hook({{constantPrefix}}_FILE, function () {
            $hook = $this->app->make(DeactivationHook::class);
            $hook->handle();
        });
    }
}
